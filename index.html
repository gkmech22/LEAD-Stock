<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lead-stock Code Repository</title>
    <!-- Include Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        h2 { color: #555; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>lead-stock Java Code Repository</h1>
    <p>Last updated: 04:08 PM IST, Friday, July 25, 2025</p>

    <h2>CSVExportService.java</h2>
    <pre><code class="java">
package com.warehouse.service;

import com.warehouse.model.Device;
import java.io.FileWriter;
import java.io.IOException;
import java.io.StringWriter;
import java.time.format.DateTimeFormatter;
import java.util.List;

public class CSVExportService {
    private static final String CSV_SEPARATOR = ",";
    private static final String CSV_HEADER = "Created At,Order Type,Order ID,Sales Order,Deal ID,Nucleus ID,School Name,Product,Model,Quantity,Device Number,SD Card Size,Profile ID,Location,Warehouse";
    private static final DateTimeFormatter DATE_FORMATTER = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");

    /**
     * Export devices to CSV string
     */
    public String exportDevicesToCSV(List<Device> devices) {
        StringWriter stringWriter = new StringWriter();
        
        try {
            // Write header
            stringWriter.append(CSV_HEADER).append("\n");
            
            // Write data rows
            for (Device device : devices) {
                stringWriter.append(buildCSVRow(device)).append("\n");
            }
            
        } catch (IOException e) {
            throw new RuntimeException("Error generating CSV", e);
        }
        
        return stringWriter.toString();
    }

    /**
     * Export devices to CSV file
     */
    public void exportDevicesToCSVFile(List<Device> devices, String filePath) throws IOException {
        try (FileWriter writer = new FileWriter(filePath)) {
            // Write header
            writer.append(CSV_HEADER).append("\n");
            
            // Write data rows
            for (Device device : devices) {
                writer.append(buildCSVRow(device)).append("\n");
            }
        }
    }

    /**
     * Build a CSV row for a device
     */
    private String buildCSVRow(Device device) {
        StringBuilder row = new StringBuilder();
        
        // Created At
        row.append(escapeCSVField(device.getCreatedAt().format(DATE_FORMATTER))).append(CSV_SEPARATOR);
        
        // Order Type
        row.append(escapeCSVField(device.getOrderType())).append(CSV_SEPARATOR);
        
        // Order ID
        row.append(escapeCSVField(device.getOrderId())).append(CSV_SEPARATOR);
        
        // Sales Order
        row.append(escapeCSVField(device.getSalesOrder())).append(CSV_SEPARATOR);
        
        // Deal ID
        row.append(escapeCSVField(device.getDealId())).append(CSV_SEPARATOR);
        
        // Nucleus ID
        row.append(escapeCSVField(device.getNucleusId())).append(CSV_SEPARATOR);
        
        // School Name
        row.append(escapeCSVField(device.getSchoolName())).append(CSV_SEPARATOR);
        
        // Product
        row.append(escapeCSVField(device.getProduct())).append(CSV_SEPARATOR);
        
        // Model
        row.append(escapeCSVField(device.getModel())).append(CSV_SEPARATOR);
        
        // Quantity
        row.append(device.getQuantity()).append(CSV_SEPARATOR);
        
        // Device Number
        row.append(escapeCSVField(device.getDeviceNumber())).append(CSV_SEPARATOR);
        
        // SD Card Size
        row.append(escapeCSVField(device.getSdCardSize())).append(CSV_SEPARATOR);
        
        // Profile ID
        row.append(escapeCSVField(device.getProfileId())).append(CSV_SEPARATOR);
        
        // Location
        row.append(escapeCSVField(device.getLocation())).append(CSV_SEPARATOR);
        
        // Warehouse (last field, no separator)
        row.append(escapeCSVField(device.getWarehouse()));
        
        return row.toString();
    }

    /**
     * Escape CSV field to handle commas, quotes, and newlines
     */
    private String escapeCSVField(String field) {
        if (field == null) {
            return "";
        }
        
        // If field contains comma, quote, or newline, wrap in quotes and escape internal quotes
        if (field.contains(",") || field.contains("\"") || field.contains("\n") || field.contains("\r")) {
            return "\"" + field.replace("\"", "\"\"") + "\"";
        }
        
        return field;
    }

    /**
     * Generate filename with timestamp
     */
    public String generateCSVFileName() {
        return "devices_export_" + 
               DateTimeFormatter.ofPattern("yyyyMMdd_HHmmss").format(java.time.LocalDateTime.now()) + 
               ".csv";
    }
}
    </code></pre>

    <h2>Device.java</h2>
    <pre><code class="java">
package com.warehouse.model;

import java.time.LocalDateTime;

public class Device {
    private String deviceNumber;
    private String orderId;
    private String orderType;
    private String salesOrder;
    private String dealId;
    private String nucleusId;
    private String schoolName;
    private String product;
    private String model;
    private int quantity;
    private String sdCardSize;
    private String profileId;
    private String location;
    private String warehouse;
    private LocalDateTime createdAt;

    // Constructors
    public Device() {
        this.createdAt = LocalDateTime.now();
    }

    public Device(String deviceNumber, Order order) {
        this();
        this.deviceNumber = deviceNumber;
        this.orderId = order.getId();
        this.orderType = order.getOrderType();
        this.salesOrder = order.getSalesOrder();
        this.dealId = order.getDealId();
        this.nucleusId = order.getNucleusId();
        this.schoolName = order.getSchoolName();
        this.product = order.getProduct();
        this.model = order.getModel();
        this.quantity = order.getQuantity();
        this.sdCardSize = order.getSdCardSize();
        this.profileId = order.getProfileId();
        this.location = order.getLocation();
        this.warehouse = order.getWarehouse();
        this.createdAt = order.getCreatedAt();
    }

    // Getters and Setters
    public String getDeviceNumber() { return deviceNumber; }
    public void setDeviceNumber(String deviceNumber) { this.deviceNumber = deviceNumber; }

    public String getOrderId() { return orderId; }
    public void setOrderId(String orderId) { this.orderId = orderId; }

    public String getOrderType() { return orderType; }
    public void setOrderType(String orderType) { this.orderType = orderType; }

    public String getSalesOrder() { return salesOrder; }
    public void setSalesOrder(String salesOrder) { this.salesOrder = salesOrder; }

    public String getDealId() { return dealId; }
    public void setDealId(String dealId) { this.dealId = dealId; }

    public String getNucleusId() { return nucleusId; }
    public void setNucleusId(String nucleusId) { this.nucleusId = nucleusId; }

    public String getSchoolName() { return schoolName; }
    public void setSchoolName(String schoolName) { this.schoolName = schoolName; }

    public String getProduct() { return product; }
    public void setProduct(String product) { this.product = product; }

    public String getModel() { return model; }
    public void setModel(String model) { this.model = model; }

    public int getQuantity() { return quantity; }
    public void setQuantity(int quantity) { this.quantity = quantity; }

    public String getSdCardSize() { return sdCardSize; }
    public void setSdCardSize(String sdCardSize) { this.sdCardSize = sdCardSize; }

    public String getProfileId() { return profileId; }
    public void setProfileId(String profileId) { this.profileId = profileId; }

    public String getLocation() { return location; }
    public void setLocation(String location) { this.location = location; }

    public String getWarehouse() { return warehouse; }
    public void setWarehouse(String warehouse) { this.warehouse = warehouse; }

    public LocalDateTime getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }
}
    </code></pre>

    <h2>Order.java</h2>
    <pre><code class="java">
package com.warehouse.model;

import java.time.LocalDateTime;
import java.util.List;

public class Order {
    private String id;
    private String orderType;
    private String salesOrder;
    private String dealId;
    private String nucleusId;
    private String schoolName;
    private String product;
    private String model;
    private int quantity;
    private String sdCardSize;
    private String profileId;
    private String location;
    private String warehouse;
    private LocalDateTime createdAt;
    private List<String> deviceNumbers;

    // Constructors
    public Order() {
        this.createdAt = LocalDateTime.now();
    }

    public Order(String orderType, String salesOrder, String dealId, String nucleusId, 
                 String schoolName, String product, String model, int quantity, 
                 String sdCardSize, String profileId, String location, String warehouse) {
        this();
        this.orderType = orderType;
        this.salesOrder = salesOrder;
        this.dealId = dealId;
        this.nucleusId = nucleusId;
        this.schoolName = schoolName;
        this.product = product;
        this.model = model;
        this.quantity = quantity;
        this.sdCardSize = sdCardSize;
        this.profileId = profileId;
        this.location = location;
        this.warehouse = warehouse;
    }

    // Getters and Setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }

    public String getOrderType() { return orderType; }
    public void setOrderType(String orderType) { this.orderType = orderType; }

    public String getSalesOrder() { return salesOrder; }
    public void setSalesOrder(String salesOrder) { this.salesOrder = salesOrder; }

    public String getDealId() { return dealId; }
    public void setDealId(String dealId) { this.dealId = dealId; }

    public String getNucleusId() { return nucleusId; }
    public void setNucleusId(String nucleusId) { this.nucleusId = nucleusId; }

    public String getSchoolName() { return schoolName; }
    public void setSchoolName(String schoolName) { this.schoolName = schoolName; }

    public String getProduct() { return product; }
    public void setProduct(String product) { this.product = product; }

    public String getModel() { return model; }
    public void setModel(String model) { this.model = model; }

    public int getQuantity() { return quantity; }
    public void setQuantity(int quantity) { this.quantity = quantity; }

    public String getSdCardSize() { return sdCardSize; }
    public void setSdCardSize(String sdCardSize) { this.sdCardSize = sdCardSize; }

    public String getProfileId() { return profileId; }
    public void setProfileId(String profileId) { this.profileId = profileId; }

    public String getLocation() { return location; }
    public void setLocation(String location) { this.location = location; }

    public String getWarehouse() { return warehouse; }
    public void setWarehouse(String warehouse) { this.warehouse = warehouse; }

    public LocalDateTime getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }

    public List<String> getDeviceNumbers() { return deviceNumbers; }
    public void setDeviceNumbers(List<String> deviceNumbers) { this.deviceNumbers = deviceNumbers; }
}
    </code></pre>

    <h2>OrderManagementApp.java</h2>
    <pre><code class="java">
package com.warehouse;

import com.warehouse.controller.OrderManagementController;
import com.warehouse.controller.OrderManagementController.OrderRequest;
import com.warehouse.model.Order;
import com.warehouse.model.Device;
import com.warehouse.service.WarehouseService;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

/**
 * Main application class demonstrating the order management system
 */
public class OrderManagementApp {
    private OrderManagementController controller;
    private Scanner scanner;
    
    public OrderManagementApp() {
        this.controller = new OrderManagementController();
        this.scanner = new Scanner(System.in);
    }
    
    public static void main(String[] args) {
        OrderManagementApp app = new OrderManagementApp();
        app.run();
    }
    
    public void run() {
        System.out.println("=== Order Management System ===");
        
        while (true) {
            printMenu();
            int choice = getChoice();
            
            switch (choice) {
                case 1:
                    createNewOrder();
                    break;
                case 2:
                    searchOrders();
                    break;
                case 3:
                    viewAllDevices();
                    break;
                case 4:
                    searchDevices();
                    break;
                case 5:
                    exportCSV();
                    break;
                case 6:
                    viewWarehouseSummary();
                    break;
                case 7:
                    viewOrdersByWarehouse();
                    break;
                case 8:
                    System.out.println("Goodbye!");
                    return;
                default:
                    System.out.println("Invalid option. Please try again.");
            }
            
            System.out.println("\nPress Enter to continue...");
            scanner.nextLine();
        }
    }
    
    private void printMenu() {
        System.out.println("\n=== Main Menu ===");
        System.out.println("1. Create New Order");
        System.out.println("2. Search Orders");
        System.out.println("3. View All Devices");
        System.out.println("4. Search Devices");
        System.out.println("5. Export CSV");
        System.out.println("6. View Warehouse Summary");
        System.out.println("7. View Orders by Warehouse");
        System.out.println("8. Exit");
        System.out.print("Choose an option: ");
    }
    
    private int getChoice() {
        try {
            return Integer.parseInt(scanner.nextLine());
        } catch (NumberFormatException e) {
            return -1;
        }
    }
    
    private void createNewOrder() {
        System.out.println("\n=== Create New Order ===");
        
        System.out.print("Order Type (New/Refurbish/Replace): ");
        String orderType = scanner.nextLine();
        
        System.out.print("Sales Order: ");
        String salesOrder = scanner.nextLine();
        
        System.out.print("Deal ID: ");
        String dealId = scanner.nextLine();
        
        System.out.print("Nucleus ID: ");
        String nucleusId = scanner.nextLine();
        
        System.out.print("School Name: ");
        String schoolName = scanner.nextLine();
        
        System.out.print("Product: ");
        String product = scanner.nextLine();
        
        System.out.print("Model: ");
        String model = scanner.nextLine();
        
        System.out.print("Quantity: ");
        int quantity = Integer.parseInt(scanner.nextLine());
        
        System.out.print("SD Card Size: ");
        String sdCardSize = scanner.nextLine();
        
        System.out.print("Profile ID: ");
        String profileId = scanner.nextLine();
        
        System.out.print("Location: ");
        String location = scanner.nextLine();
        
        System.out.print("Warehouse: ");
        String warehouse = scanner.nextLine();
        
        OrderRequest request = new OrderRequest(orderType, salesOrder, dealId, nucleusId,
                                               schoolName, product, model, quantity,
                                               sdCardSize, profileId, location, warehouse);
        
        Order order = controller.createOrder(request);
        
        System.out.println("\nOrder created successfully!");
        printOrderDetails(order);
    }
    
    private void searchOrders() {
        System.out.println("\n=== Search Orders ===");
        System.out.print("Enter search term (Sales Order, Deal ID, Order ID, etc.): ");
        String searchTerm = scanner.nextLine();
        
        List<Order> orders = controller.searchOrders(searchTerm);
        
        if (orders.isEmpty()) {
            System.out.println("No orders found.");
        } else {
            System.out.println("\nFound " + orders.size() + " order(s):");
            for (Order order : orders) {
                printOrderSummary(order);
                System.out.println("---");
            }
        }
    }
    
    private void viewAllDevices() {
        System.out.println("\n=== All Devices ===");
        List<Device> devices = controller.getAllDevices();
        
        if (devices.isEmpty()) {
            System.out.println("No devices found.");
        } else {
            System.out.println("Total devices: " + devices.size());
            System.out.println();
            printDeviceHeader();
            for (Device device : devices) {
                printDeviceRow(device);
            }
        }
    }
    
    private void searchDevices() {
        System.out.println("\n=== Search Devices ===");
        System.out.print("Enter search term (Device Number, Sales Order, Deal ID, etc.): ");
        String searchTerm = scanner.nextLine();
        
        List<Device> devices = controller.searchDevices(searchTerm);
        
        if (devices.isEmpty()) {
            System.out.println("No devices found.");
        } else {
            System.out.println("\nFound " + devices.size() + " device(s):");
            printDeviceHeader();
            for (Device device : devices) {
                printDeviceRow(device);
            }
        }
    }
    
    private void exportCSV() {
        System.out.println("\n=== Export CSV ===");
        System.out.print("Enter file path (e.g., /path/to/devices.csv): ");
        String filePath = scanner.nextLine();
        
        try {
            controller.exportDevicesToFile(filePath);
            System.out.println("CSV exported successfully to: " + filePath);
        } catch (Exception e) {
            System.out.println("Error exporting CSV: " + e.getMessage());
        }
    }
    
    private void viewWarehouseSummary() {
        System.out.println("\n=== Warehouse Summary ===");
        Map<String, WarehouseService.WarehouseSummary> summary = controller.getWarehouseSummary();
        
        if (summary.isEmpty()) {
            System.out.println("No warehouse data available.");
        } else {
            for (WarehouseService.WarehouseSummary warehouseSummary : summary.values()) {
                System.out.println("\nWarehouse: " + warehouseSummary.getWarehouseName());
                System.out.println("Total Orders: " + warehouseSummary.getTotalOrders());
                System.out.println("Total Devices: " + warehouseSummary.getTotalDevices());
                System.out.println("Total Quantity: " + warehouseSummary.getTotalQuantity());
                
                if (warehouseSummary.getOrderTypes() != null && !warehouseSummary.getOrderTypes().isEmpty()) {
                    System.out.println("Order Types:");
                    warehouseSummary.getOrderTypes().forEach((type, count) -> 
                        System.out.println("  " + type + ": " + count));
                }
                
                System.out.println("---");
            }
        }
    }
    
    private void viewOrdersByWarehouse() {
        System.out.println("\n=== Orders by Warehouse ===");
        List<String> warehouses = controller.getAllWarehouses();
        
        if (warehouses.isEmpty()) {
            System.out.println("No warehouses available.");
            return;
        }
        
        System.out.println("Available warehouses:");
        for (int i = 0; i < warehouses.size(); i++) {
            System.out.println((i + 1) + ". " + warehouses.get(i));
        }
        
        System.out.print("Select warehouse number: ");
        try {
            int choice = Integer.parseInt(scanner.nextLine()) - 1;
            if (choice >= 0 && choice < warehouses.size()) {
                String warehouse = warehouses.get(choice);
                List<Order> orders = controller.getOrdersByWarehouse(warehouse);
                
                System.out.println("\nOrders in " + warehouse + ":");
                if (orders.isEmpty()) {
                    System.out.println("No orders found for this warehouse.");
                } else {
                    for (Order order : orders) {
                        printOrderSummary(order);
                        System.out.println("---");
                    }
                }
            } else {
                System.out.println("Invalid warehouse selection.");
            }
        } catch (NumberFormatException e) {
            System.out.println("Invalid input.");
        }
    }
    
    private void printOrderDetails(Order order) {
        System.out.println("Order ID: " + order.getId());
        System.out.println("Order Type: " + order.getOrderType());
        System.out.println("Sales Order: " + order.getSalesOrder());
        System.out.println("Deal ID: " + order.getDealId());
        System.out.println("School Name: " + order.getSchoolName());
        System.out.println("Product: " + order.getProduct());
        System.out.println("Model: " + order.getModel());
        System.out.println("Quantity: " + order.getQuantity());
        System.out.println("Warehouse: " + order.getWarehouse());
        System.out.println("Created At: " + order.getCreatedAt());
        
        if (order.getDeviceNumbers() != null && !order.getDeviceNumbers().isEmpty()) {
            System.out.println("Device Numbers:");
            for (String deviceNumber : order.getDeviceNumbers()) {
                System.out.println("  " + deviceNumber);
            }
        }
    }
    
    private void printOrderSummary(Order order) {
        System.out.println("Order ID: " + order.getId() + 
                          " | Type: " + order.getOrderType() + 
                          " | Sales Order: " + order.getSalesOrder() + 
                          " | Quantity: " + order.getQuantity() + 
                          " | Warehouse: " + order.getWarehouse());
    }
    
    private void printDeviceHeader() {
        System.out.printf("%-20s %-12s %-15s %-15s %-12s %-20s %-10s %-15s %-10s%n",
                         "Created At", "Order Type", "Order ID", "Sales Order", "Deal ID", 
                         "Device Number", "Quantity", "Product", "Warehouse");
        System.out.println("=".repeat(150));
    }
    
    private void printDeviceRow(Device device) {
        System.out.printf("%-20s %-12s %-15s %-15s %-12s %-20s %-10d %-15s %-10s%n",
                         device.getCreatedAt().toString().substring(0, 19),
                         device.getOrderType(),
                         device.getOrderId(),
                         device.getSalesOrder(),
                         device.getDealId(),
                         device.getDeviceNumber(),
                         device.getQuantity(),
                         device.getProduct(),
                         device.getWarehouse());
    }
}
    </code></pre>

    <h2>OrderManagementController.java</h2>
    <pre><code class="java">
package com.warehouse.controller;

import com.warehouse.model.Order;
import com.warehouse.model.Device;
import com.warehouse.service.OrderService;
import com.warehouse.service.CSVExportService;
import com.warehouse.service.WarehouseService;
import java.util.List;
import java.util.Map;

/**
 * Main controller class that orchestrates all order management operations
 * This is equivalent to the React component's business logic
 */
public class OrderManagementController {
    private OrderService orderService;
    private CSVExportService csvExportService;
    private WarehouseService warehouseService;
    
    public OrderManagementController() {
        this.orderService = new OrderService();
        this.csvExportService = new CSVExportService();
        this.warehouseService = new WarehouseService(orderService);
    }

    /**
     * Create a new order
     */
    public Order createOrder(OrderRequest request) {
        return orderService.createOrder(
            request.getOrderType(),
            request.getSalesOrder(),
            request.getDealId(),
            request.getNucleusId(),
            request.getSchoolName(),
            request.getProduct(),
            request.getModel(),
            request.getQuantity(),
            request.getSdCardSize(),
            request.getProfileId(),
            request.getLocation(),
            request.getWarehouse()
        );
    }

    /**
     * Search orders
     */
    public List<Order> searchOrders(String searchTerm) {
        return orderService.searchOrders(searchTerm);
    }

    /**
     * Search devices
     */
    public List<Device> searchDevices(String searchTerm) {
        return orderService.searchDevices(searchTerm);
    }

    /**
     * Get all devices sorted by creation date
     */
    public List<Device> getAllDevices() {
        return orderService.getAllDevicesSortedByDate();
    }

    /**
     * Get all orders
     */
    public List<Order> getAllOrders() {
        return orderService.getAllOrders();
    }

    /**
     * Export devices to CSV
     */
    public String exportDevicesToCSV() {
        List<Device> devices = orderService.getAllDevicesSortedByDate();
        return csvExportService.exportDevicesToCSV(devices);
    }

    /**
     * Export devices to CSV file
     */
    public void exportDevicesToFile(String filePath) {
        try {
            List<Device> devices = orderService.getAllDevicesSortedByDate();
            csvExportService.exportDevicesToCSVFile(devices, filePath);
        } catch (Exception e) {
            throw new RuntimeException("Failed to export CSV file", e);
        }
    }

    /**
     * Get warehouse summary
     */
    public Map<String, WarehouseService.WarehouseSummary> getWarehouseSummary() {
        return warehouseService.getWarehouseSummary();
    }

    /**
     * Get all warehouses
     */
    public List<String> getAllWarehouses() {
        return warehouseService.getAllWarehouses();
    }

    /**
     * Get orders by warehouse
     */
    public List<Order> getOrdersByWarehouse(String warehouse) {
        return warehouseService.getOrdersByWarehouse(warehouse);
    }

    /**
     * Get devices by warehouse
     */
    public List<Device> getDevicesByWarehouse(String warehouse) {
        return warehouseService.getDevicesByWarehouse(warehouse);
    }

    /**
     * Get warehouse statistics
     */
    public WarehouseService.WarehouseStatistics getWarehouseStatistics(String warehouse) {
        return warehouseService.getWarehouseStatistics(warehouse);
    }

    /**
     * Delete order
     */
    public boolean deleteOrder(String orderId) {
        return orderService.deleteOrder(orderId);
    }

    /**
     * Update order
     */
    public boolean updateOrder(String orderId, OrderRequest request) {
        Order updatedOrder = new Order(
            request.getOrderType(),
            request.getSalesOrder(),
            request.getDealId(),
            request.getNucleusId(),
            request.getSchoolName(),
            request.getProduct(),
            request.getModel(),
            request.getQuantity(),
            request.getSdCardSize(),
            request.getProfileId(),
            request.getLocation(),
            request.getWarehouse()
        );
        
        return orderService.updateOrder(orderId, updatedOrder);
    }

    /**
     * Get order by ID
     */
    public Order getOrderById(String orderId) {
        return orderService.getOrderById(orderId);
    }

    // Inner class for order request data
    public static class OrderRequest {
        private String orderType;
        private String salesOrder;
        private String dealId;
        private String nucleusId;
        private String schoolName;
        private String product;
        private String model;
        private int quantity;
        private String sdCardSize;
        private String profileId;
        private String location;
        private String warehouse;

        // Constructors
        public OrderRequest() {}

        public OrderRequest(String orderType, String salesOrder, String dealId, String nucleusId, 
                           String schoolName, String product, String model, int quantity, 
                           String sdCardSize, String profileId, String location, String warehouse) {
            this.orderType = orderType;
            this.salesOrder = salesOrder;
            this.dealId = dealId;
            this.nucleusId = nucleusId;
            this.schoolName = schoolName;
            this.product = product;
            this.model = model;
            this.quantity = quantity;
            this.sdCardSize = sdCardSize;
            this.profileId = profileId;
            this.location = location;
            this.warehouse = warehouse;
        }

        // Getters and Setters
        public String getOrderType() { return orderType; }
        public void setOrderType(String orderType) { this.orderType = orderType; }

        public String getSalesOrder() { return salesOrder; }
        public void setSalesOrder(String salesOrder) { this.salesOrder = salesOrder; }

        public String getDealId() { return dealId; }
        public void setDealId(String dealId) { this.dealId = dealId; }

        public String getNucleusId() { return nucleusId; }
        public void setNucleusId(String nucleusId) { this.nucleusId = nucleusId; }

        public String getSchoolName() { return schoolName; }
        public void setSchoolName(String schoolName) { this.schoolName = schoolName; }

        public String getProduct() { return product; }
        public void setProduct(String product) { this.product = product; }

        public String getModel() { return model; }
        public void setModel(String model) { this.model = model; }

        public int getQuantity() { return quantity; }
        public void setQuantity(int quantity) { this.quantity = quantity; }

        public String getSdCardSize() { return sdCardSize; }
        public void setSdCardSize(String sdCardSize) { this.sdCardSize = sdCardSize; }

        public String getProfileId() { return profileId; }
        public void setProfileId(String profileId) { this.profileId = profileId; }

        public String getLocation() { return location; }
        public void setLocation(String location) { this.location = location; }

        public String getWarehouse() { return warehouse; }
        public void setWarehouse(String warehouse) { this.warehouse = warehouse; }
    }
}
    </code></pre>

    <h2>OrderService.java</h2>
    <pre><code class="java">
package com.warehouse.service;

import com.warehouse.model.Order;
import com.warehouse.model.Device;
import java.util.*;
import java.util.stream.Collectors;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class OrderService {
    private List<Order> orders;
    private List<Device> devices;
    private int orderCounter;

    public OrderService() {
        this.orders = new ArrayList<>();
        this.devices = new ArrayList<>();
        this.orderCounter = 1;
    }

    /**
     * Create a new order with generated device numbers
     */
    public Order createOrder(String orderType, String salesOrder, String dealId, 
                           String nucleusId, String schoolName, String product, 
                           String model, int quantity, String sdCardSize, 
                           String profileId, String location, String warehouse) {
        
        Order order = new Order(orderType, salesOrder, dealId, nucleusId, 
                               schoolName, product, model, quantity, 
                               sdCardSize, profileId, location, warehouse);
        
        // Generate unique order ID
        order.setId("ORD-" + String.format("%06d", orderCounter++));
        
        // Generate device numbers
        List<String> deviceNumbers = generateDeviceNumbers(order);
        order.setDeviceNumbers(deviceNumbers);
        
        // Create individual device records
        for (String deviceNumber : deviceNumbers) {
            Device device = new Device(deviceNumber, order);
            devices.add(device);
        }
        
        orders.add(order);
        return order;
    }

    /**
     * Generate device numbers based on order details
     */
    private List<String> generateDeviceNumbers(Order order) {
        List<String> deviceNumbers = new ArrayList<>();
        String prefix = generateDevicePrefix(order);
        
        for (int i = 1; i <= order.getQuantity(); i++) {
            String deviceNumber = prefix + String.format("%04d", i);
            deviceNumbers.add(deviceNumber);
        }
        
        return deviceNumbers;
    }

    /**
     * Generate device prefix based on order type and product
     */
    private String generateDevicePrefix(Order order) {
        StringBuilder prefix = new StringBuilder();
        
        // Add order type prefix
        switch (order.getOrderType().toLowerCase()) {
            case "new":
                prefix.append("NEW-");
                break;
            case "refurbish":
                prefix.append("REF-");
                break;
            case "replace":
                prefix.append("RPL-");
                break;
            default:
                prefix.append("ORD-");
                break;
        }
        
        // Add product/model abbreviation
        if (order.getProduct() != null && !order.getProduct().isEmpty()) {
            prefix.append(order.getProduct().substring(0, Math.min(3, order.getProduct().length())).toUpperCase());
        }
        
        if (order.getModel() != null && !order.getModel().isEmpty()) {
            prefix.append(order.getModel().substring(0, Math.min(2, order.getModel().length())).toUpperCase());
        }
        
        prefix.append("-");
        return prefix.toString();
    }

    /**
     * Search orders by various criteria
     */
    public List<Order> searchOrders(String searchTerm) {
        if (searchTerm == null || searchTerm.trim().isEmpty()) {
            return new ArrayList<>(orders);
        }
        
        String term = searchTerm.toLowerCase().trim();
        
        return orders.stream()
                .filter(order -> 
                    (order.getSalesOrder() != null && order.getSalesOrder().toLowerCase().contains(term)) ||
                    (order.getDealId() != null && order.getDealId().toLowerCase().contains(term)) ||
                    (order.getId() != null && order.getId().toLowerCase().contains(term)) ||
                    (order.getNucleusId() != null && order.getNucleusId().toLowerCase().contains(term)) ||
                    (order.getSchoolName() != null && order.getSchoolName().toLowerCase().contains(term)) ||
                    order.getDeviceNumbers().stream().anyMatch(device -> device.toLowerCase().contains(term))
                )
                .collect(Collectors.toList());
    }

    /**
     * Search devices by device number or other criteria
     */
    public List<Device> searchDevices(String searchTerm) {
        if (searchTerm == null || searchTerm.trim().isEmpty()) {
            return new ArrayList<>(devices);
        }
        
        String term = searchTerm.toLowerCase().trim();
        
        return devices.stream()
                .filter(device -> 
                    (device.getDeviceNumber() != null && device.getDeviceNumber().toLowerCase().contains(term)) ||
                    (device.getSalesOrder() != null && device.getSalesOrder().toLowerCase().contains(term)) ||
                    (device.getDealId() != null && device.getDealId().toLowerCase().contains(term)) ||
                    (device.getOrderId() != null && device.getOrderId().toLowerCase().contains(term))
                )
                .collect(Collectors.toList());
    }

    /**
     * Get all devices sorted by creation date
     */
    public List<Device> getAllDevicesSortedByDate() {
        return devices.stream()
                .sorted((d1, d2) -> d2.getCreatedAt().compareTo(d1.getCreatedAt()))
                .collect(Collectors.toList());
    }

    /**
     * Get orders by warehouse
     */
    public List<Order> getOrdersByWarehouse(String warehouse) {
        return orders.stream()
                .filter(order -> warehouse.equals(order.getWarehouse()))
                .collect(Collectors.toList());
    }

    /**
     * Get unique warehouses
     */
    public List<String> getUniqueWarehouses() {
        return orders.stream()
                .map(Order::getWarehouse)
                .filter(Objects::nonNull)
                .distinct()
                .sorted()
                .collect(Collectors.toList());
    }

    /**
     * Get warehouse summary
     */
    public Map<String, Integer> getWarehouseSummary() {
        Map<String, Integer> summary = new HashMap<>();
        
        for (Order order : orders) {
            String warehouse = order.getWarehouse();
            if (warehouse != null && !warehouse.isEmpty()) {
                summary.put(warehouse, summary.getOrDefault(warehouse, 0) + order.getQuantity());
            }
        }
        
        return summary;
    }

    /**
     * Get all orders
     */
    public List<Order> getAllOrders() {
        return new ArrayList<>(orders);
    }

    /**
     * Get all devices
     */
    public List<Device> getAllDevices() {
        return new ArrayList<>(devices);
    }

    /**
     * Get order by ID
     */
    public Order getOrderById(String orderId) {
        return orders.stream()
                .filter(order -> orderId.equals(order.getId()))
                .findFirst()
                .orElse(null);
    }

    /**
     * Delete order and associated devices
     */
    public boolean deleteOrder(String orderId) {
        Order order = getOrderById(orderId);
        if (order != null) {
            // Remove associated devices
            devices.removeIf(device -> orderId.equals(device.getOrderId()));
            // Remove order
            orders.remove(order);
            return true;
        }
        return false;
    }

    /**
     * Update order
     */
    public boolean updateOrder(String orderId, Order updatedOrder) {
        Order existingOrder = getOrderById(orderId);
        if (existingOrder != null) {
            // Update order fields
            existingOrder.setOrderType(updatedOrder.getOrderType());
            existingOrder.setSalesOrder(updatedOrder.getSalesOrder());
            existingOrder.setDealId(updatedOrder.getDealId());
            existingOrder.setNucleusId(updatedOrder.getNucleusId());
            existingOrder.setSchoolName(updatedOrder.getSchoolName());
            existingOrder.setProduct(updatedOrder.getProduct());
            existingOrder.setModel(updatedOrder.getModel());
            existingOrder.setQuantity(updatedOrder.getQuantity());
            existingOrder.setSdCardSize(updatedOrder.getSdCardSize());
            existingOrder.setProfileId(updatedOrder.getProfileId());
            existingOrder.setLocation(updatedOrder.getLocation());
            existingOrder.setWarehouse(updatedOrder.getWarehouse());
            
            // Regenerate device numbers if quantity changed
            if (existingOrder.getQuantity() != updatedOrder.getQuantity()) {
                // Remove old devices
                devices.removeIf(device -> orderId.equals(device.getOrderId()));
                
                // Generate new device numbers
                List<String> newDeviceNumbers = generateDeviceNumbers(existingOrder);
                existingOrder.setDeviceNumbers(newDeviceNumbers);
                
                // Create new device records
                for (String deviceNumber : newDeviceNumbers) {
                    Device device = new Device(deviceNumber, existingOrder);
                    devices.add(device);
                }
            }
            
            return true;
        }
        return false;
    }
}
    </code></pre>

    <h2>WarehouseService.java</h2>
    <pre><code class="java">
package com.warehouse.service;

import com.warehouse.model.Order;
import com.warehouse.model.Device;
import java.util.*;
import java.util.stream.Collectors;

public class WarehouseService {
    private OrderService orderService;
    
    public WarehouseService(OrderService orderService) {
        this.orderService = orderService;
    }

    /**
     * Get all available warehouses
     */
    public List<String> getAllWarehouses() {
        return orderService.getUniqueWarehouses();
    }

    /**
     * Get warehouse summary with order and device counts
     */
    public Map<String, WarehouseSummary> getWarehouseSummary() {
        Map<String, WarehouseSummary> summaryMap = new HashMap<>();
        
        // Get all orders grouped by warehouse
        Map<String, List<Order>> ordersByWarehouse = orderService.getAllOrders().stream()
                .filter(order -> order.getWarehouse() != null && !order.getWarehouse().isEmpty())
                .collect(Collectors.groupingBy(Order::getWarehouse));
        
        // Get all devices grouped by warehouse
        Map<String, List<Device>> devicesByWarehouse = orderService.getAllDevices().stream()
                .filter(device -> device.getWarehouse() != null && !device.getWarehouse().isEmpty())
                .collect(Collectors.groupingBy(Device::getWarehouse));
        
        // Build summary for each warehouse
        Set<String> allWarehouses = new HashSet<>();
        allWarehouses.addAll(ordersByWarehouse.keySet());
        allWarehouses.addAll(devicesByWarehouse.keySet());
        
        for (String warehouse : allWarehouses) {
            List<Order> orders = ordersByWarehouse.getOrDefault(warehouse, new ArrayList<>());
            List<Device> devices = devicesByWarehouse.getOrDefault(warehouse, new ArrayList<>());
            
            WarehouseSummary summary = new WarehouseSummary();
            summary.setWarehouseName(warehouse);
            summary.setTotalOrders(orders.size());
            summary.setTotalDevices(devices.size());
            summary.setTotalQuantity(orders.stream().mapToInt(Order::getQuantity).sum());
            summary.setOrderTypes(getOrderTypesSummary(orders));
            summary.setProductSummary(getProductSummary(orders));
            
            summaryMap.put(warehouse, summary);
        }
        
        return summaryMap;
    }

    /**
     * Get orders by warehouse
     */
    public List<Order> getOrdersByWarehouse(String warehouse) {
        return orderService.getOrdersByWarehouse(warehouse);
    }

    /**
     * Get devices by warehouse
     */
    public List<Device> getDevicesByWarehouse(String warehouse) {
        return orderService.getAllDevices().stream()
                .filter(device -> warehouse.equals(device.getWarehouse()))
                .collect(Collectors.toList());
    }

    /**
     * Get order types summary for a list of orders
     */
    private Map<String, Integer> getOrderTypesSummary(List<Order> orders) {
        return orders.stream()
                .collect(Collectors.groupingBy(
                    Order::getOrderType,
                    Collectors.summingInt(order -> 1)
                ));
    }

    /**
     * Get product summary for a list of orders
     */
    private Map<String, Integer> getProductSummary(List<Order> orders) {
        return orders.stream()
                .collect(Collectors.groupingBy(
                    Order::getProduct,
                    Collectors.summingInt(Order::getQuantity)
                ));
    }

    /**
     * Get warehouse statistics
     */
    public WarehouseStatistics getWarehouseStatistics(String warehouse) {
        List<Order> orders = getOrdersByWarehouse(warehouse);
        List<Device> devices = getDevicesByWarehouse(warehouse);
        
        WarehouseStatistics stats = new WarehouseStatistics();
        stats.setWarehouseName(warehouse);
        stats.setTotalOrders(orders.size());
        stats.setTotalDevices(devices.size());
        stats.setTotalQuantity(orders.stream().mapToInt(Order::getQuantity).sum());
        
        // Calculate order type distribution
        Map<String, Integer> orderTypeCount = orders.stream()
                .collect(Collectors.groupingBy(
                    Order::getOrderType,
                    Collectors.summingInt(order -> 1)
                ));
        stats.setOrderTypeDistribution(orderTypeCount);
        
        // Calculate product distribution
        Map<String, Integer> productCount = orders.stream()
                .collect(Collectors.groupingBy(
                    Order::getProduct,
                    Collectors.summingInt(Order::getQuantity)
                ));
        stats.setProductDistribution(productCount);
        
        // Recent activity (orders in last 30 days)
        long recentOrderCount = orders.stream()
                .filter(order -> order.getCreatedAt().isAfter(
                    java.time.LocalDateTime.now().minusDays(30)))
                .count();
        stats.setRecentOrderCount((int) recentOrderCount);
        
        return stats;
    }

    // Inner classes for warehouse data structures
    public static class WarehouseSummary {
        private String warehouseName;
        private int totalOrders;
        private int totalDevices;
        private int totalQuantity;
        private Map<String, Integer> orderTypes;
        private Map<String, Integer> productSummary;

        // Getters and Setters
        public String getWarehouseName() { return warehouseName; }
        public void setWarehouseName(String warehouseName) { this.warehouseName = warehouseName; }

        public int getTotalOrders() { return totalOrders; }
        public void setTotalOrders(int totalOrders) { this.totalOrders = totalOrders; }

        public int getTotalDevices() { return totalDevices; }
        public void setTotalDevices(int totalDevices) { this.totalDevices = totalDevices; }

        public int getTotalQuantity() { return totalQuantity; }
        public void setTotalQuantity(int totalQuantity) { this.totalQuantity = totalQuantity; }

        public Map<String, Integer> getOrderTypes() { return orderTypes; }
        public void setOrderTypes(Map<String, Integer> orderTypes) { this.orderTypes = orderTypes; }

        public Map<String, Integer> getProductSummary() { return productSummary; }
        public void setProductSummary(Map<String, Integer> productSummary) { this.productSummary = productSummary; }
    }

    public static class WarehouseStatistics {
        private String warehouseName;
        private int totalOrders;
        private int totalDevices;
        private int totalQuantity;
        private int recentOrderCount;
        private Map<String, Integer> orderTypeDistribution;
        private Map<String, Integer> productDistribution;

        // Getters and Setters
        public String getWarehouseName() { return warehouseName; }
        public void setWarehouseName(String warehouseName) { this.warehouseName = warehouseName; }

        public int getTotalOrders() { return totalOrders; }
        public void setTotalOrders(int totalOrders) { this.totalOrders = totalOrders; }

        public int getTotalDevices() { return totalDevices; }
        public void setTotalDevices(int totalDevices) { this.totalDevices = totalDevices; }

        public int getTotalQuantity() { return totalQuantity; }
        public void setTotalQuantity(int totalQuantity) { this.totalQuantity = totalQuantity; }

        public int getRecentOrderCount() { return recentOrderCount; }
        public void setRecentOrderCount(int recentOrderCount) { this.recentOrderCount = recentOrderCount; }

        public Map<String, Integer> getOrderTypeDistribution() { return orderTypeDistribution; }
        public void setOrderTypeDistribution(Map<String, Integer> orderTypeDistribution) { 
            this.orderTypeDistribution = orderTypeDistribution; 
        }

        public Map<String, Integer> getProductDistribution() { return productDistribution; }
        public void setProductDistribution(Map<String, Integer> productDistribution) { 
            this.productDistribution = productDistribution; 
        }
    }
}
    </code></pre>
</body>
</html>
